<view class="container">
  <view class="home-layout">
    
    <!-- å·¦ä¾§å¯¼èˆª -->
    <sidebar-nav activeNav="ä»Šæ—¥çƒ­ç‚¹" userAvatar="{{userAvatar}}"></sidebar-nav>

    <!-- å³ä¾§ä¸»å†…å®¹åŒº -->
    <view class="home-main">
      <!-- é¡¶éƒ¨æ ‡é¢˜ä¸æœç´¢ -->
      <view class="main-header">
        <view class="header-left">
          <view class="greeting">ä»Šæ—¥çƒ­ç‚¹</view>
          <view class="sub-greeting">ç»“æ„åŒ–è§£è¯»æ—¶æ”¿çƒ­ç‚¹ï¼Œå¿«é€Ÿæ²‰æ·€ç”³è®ºç´ æã€‚</view>
        </view>
        <view class="header-right">
          <view class="search-bar">
            <text class="search-icon">ğŸ”</text>
            <input class="search-input" placeholder="æœç´¢çƒ­ç‚¹..." placeholder-class="search-placeholder" />
          </view>
        </view>
      </view>

      <view class="topic-list">
        <!-- åŠ è½½çŠ¶æ€ -->
        <view class="loading-box" wx:if="{{loading}}">
          <view class="loading-spinner"></view>
          <text>æ­£åœ¨åŒæ­¥æœ€æ–°çƒ­ç‚¹...</text>
        </view>

        <!-- åˆ—è¡¨å†…å®¹ -->
        <block wx:if="{{!loading}}">
          <view 
            wx:for="{{hotTopics}}" 
            wx:key="id"
            class="topic-card"
          >
            <view class="card-content">
              <view class="topic-info">
                <view class="topic-title-row">
                  <text class="topic-title">{{item.title}}</text>
                  <text class="source-tag {{item.source === 'äººæ°‘æ—¥æŠ¥' ? 'source-rss' : 'source-local'}}">[{{item.source}}]</text>
                </view>
                <view class="topic-footer">
                  <view class="topic-tags">
                    <text wx:for="{{item.tags}}" wx:for-item="tag" wx:key="*this" class="tag">#{{tag}}</text>
                  </view>
                  <text class="topic-date">{{item.date}}</text>
                </view>
              </view>
              <view class="card-right">
                <button class="btn-train-direct" bindtap="goToTraining" data-title="{{item.title}}">
                  å¼€å§‹è®­ç»ƒ â†’
                </button>
              </view>
            </view>
          </view>
        </block>
      </view>
    </view>
  </view>
</view>
