<view class="container">
  <!-- ä¾§è¾¹å¯¼èˆªæ  -->
  <sidebar-nav activeNav="æˆ‘çš„" userAvatar="{{userInfo.avatar}}"></sidebar-nav>

  <!-- ä¸»å†…å®¹åŒº -->
  <scroll-view scroll-y class="main-content">
    <view class="content-wrapper">
      <!-- Header -->
      <view class="header">
        <view class="header-left">
          <view class="avatar-container">
            <image class="user-avatar-large" src="{{userInfo.avatar}}" mode="aspectFill"></image>
            <view class="target-badge">
              <text class="target-icon">ğŸ¯</text>
            </view>
          </view>
          <view class="user-info">
            <view class="name-row">
              <text class="nickname">{{userInfo.nickname}}</text>
              <view class="level-badge">{{userInfo.level}}</view>
            </view>
            <text class="motto">{{userInfo.motto}} â€”â€” ç¬¬{{userInfo.streakDays}}å¤©æ‰“å¡</text>
          </view>
        </view>
      </view>

      <!-- Grid Layout -->
      <view class="dashboard-grid">
        <!-- Left Column -->
        <view class="grid-left">
          <!-- Week Stats Card -->
          <view class="card stats-card">
            <text class="card-label">æœ¬å‘¨å¤ç›˜ ({{weekStats.range}})</text>
            <view class="stats-row">
              <view class="stat-item">
                <text class="stat-label">è®­ç»ƒæ¬¡æ•°</text>
                <view class="stat-value-row">
                  <text class="stat-value">{{weekStats.trainCount}}</text>
                  <text class="stat-trend">{{weekStats.trainTrend}}</text>
                </view>
              </view>
              <view class="stat-item">
                <text class="stat-label">èƒŒè¯µæ—¶é•¿</text>
                <view class="stat-value-row">
                  <text class="stat-value">{{weekStats.memoryTime}}</text>
                  <text class="stat-unit">avg</text>
                </view>
              </view>
              <view class="stat-item">
                <text class="stat-label">AI æ”¹å†™é‡‡çº³</text>
                <view class="stat-value-row">
                  <text class="stat-value">{{weekStats.aiAdoption}}</text>
                  <text class="stat-unit">æ¬¡</text>
                </view>
              </view>
            </view>

            <!-- Distribution -->
            <view class="distribution-section">
              <text class="section-title">ç»ƒä¹ ä¸»é¢˜åˆ†å¸ƒ</text>
              <view class="progress-bar-multi">
                <view 
                  wx:for="{{topicDistribution}}" 
                  wx:key="name" 
                  class="progress-segment" 
                  style="width: {{item.percentage}}%; background-color: {{item.color}};"
                ></view>
              </view>
              <view class="legend-row">
                <view class="legend-item" wx:for="{{topicDistribution}}" wx:key="name" wx:if="{{index < 2}}">
                  <view class="legend-dot" style="background-color: {{item.color}}"></view>
                  <text>{{item.name}} {{item.percentage}}%</text>
                </view>
              </view>
            </view>
          </view>

          <!-- Quick Links -->
          <view class="quick-links">
            <view class="link-card">
              <view class="link-left">
                <view class="link-icon-box bg-indigo">ğŸ“–</view>
                <view class="link-text">
                  <text class="link-title">æˆ‘çš„é”™é¢˜/å¼±é¡¹</text>
                  <text class="link-subtitle">åŸºäºè®°å¿†æ›²çº¿è‡ªåŠ¨ç»Ÿè®¡</text>
                </view>
              </view>
              <text class="chevron">ã€‰</text>
            </view>
            <view class="link-card">
              <view class="link-left">
                <view class="link-icon-box bg-emerald">ğŸ“ˆ</view>
                <view class="link-text">
                  <text class="link-title">æ¨¡è€ƒè®°å½•</text>
                  <text class="link-subtitle">æŸ¥çœ‹å†å²è¯„åˆ†è¶‹åŠ¿</text>
                </view>
              </view>
              <text class="chevron">ã€‰</text>
            </view>
          </view>
        </view>

        <!-- Right Column -->
        <view class="grid-right">
          <!-- AI Plan Card -->
          <view class="card ai-plan-card">
            <view class="ai-header">
              <text class="sparkle-icon">âœ¨</text>
              <text>AI ä¸‹å‘¨ç»ƒä¹ è®¡åˆ’å»ºè®®</text>
            </view>
            <view class="ai-suggestions">
              <view class="suggestion-item" wx:for="{{aiSuggestions}}" wx:key="title">
                <text class="suggestion-title">{{item.title}}</text>
                <text class="suggestion-content">{{item.content}}</text>
              </view>
            </view>
            <view class="ai-glow-bg"></view>
          </view>

          <!-- Streak Card -->
          <view class="card streak-card">
            <view class="streak-header">
              <text class="calendar-icon">ğŸ“…</text>
              <text>æŒç»­æ‰“å¡ {{userInfo.streakDays}} å¤©</text>
            </view>
            <view class="streak-grid">
              <view 
                class="streak-dot {{item.active ? 'active' : ''}}" 
                wx:for="{{streakGrid}}" 
                wx:key="index"
              ></view>
            </view>
            <text class="streak-footer">è·ç¦»ä¸‹ä¸€ä¸ªé‡Œç¨‹ç¢‘ã€Œ21å¤©ä¹ æƒ¯å…»æˆã€è¿˜æœ‰ 7 å¤©</text>
          </view>
        </view>
      </view>
    </view>
  </scroll-view>
</view>
